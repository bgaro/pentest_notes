# SMB - Port 139,445

### Links

- [SMB - Port 139,445](#smb---port-139445)
  - [Links](#links)
  - [smbmap](#smbmap)
  - [smbclient](#smbclient)
  - [crackmapexec](#crackmapexec)
  - [enum4linux](#enum4linux)

## smbmap

1. map the share as an anonymous user

```bash
smbmap -H X.X.X.X
```

2. map the share as a user

```bash
smbmap -H X.X.X.X -u "<user>" -p "<password_or_NTLM>"
```

## smbclient

1. List a SMB share as an anonymous user

```bash
smbclient -L //X.X.X.X -N
```

2. List a SMB share as a user

```bash
smbclient -L //X.X.X.X -U "<user>%<password>"
```

3. Connect to a SMB share as a user

```bash
smbclient //X.X.X.X -N
```

4. Connect to a SMB share as a user

```bash
smbclient //X.X.X.X -U "<DOMAIN>/<user>%<password>"
```

5. Connect to a SMB share as a user with hash

```bash
smbclient //X.X.X.X -U "<DOMAIN>/<user>" --pw-nt-hash "<NT>"
```

6. Download a directory

```bash
cd <directory>
recurse ON
prompt OFF
mget *
```

## netexec

1. List shares as an anonymous user

```bash
netexec smb X.X.X.X --shares
```

2. List shares as a user

```bash
netexec smb X.X.X.X -u "<user>" -p "<password>"  --shares
```

3. List shares as a user with NTLM hash

```bash
netexec smb X.X.X.X -u "<user>" -H "<NTLM>"  --shares
```

## enum4linux

1. Enumerate as an anonymous user

```bash
enum4linux -a X.X.X.X
```

2. Enumerate as a user

```bash
enum4linux -a -u "<user>" -p "<password>" X.X.X.X
```
